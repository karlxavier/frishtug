<%= form_with model: @registration, url: user_registrations_path(format: :js), id: 'sign_up_form' do |form| %>
  <div class="container">
    <div id="registration-form">
      <form-wizard @on-complete="onComplete" step-size="xs" color="#37c429">
        <h2 slot="title"></h2>
        <tab-content title="Create Account" :before-change="accountValidations">
          <%= render 'sign_up_step', form: form %>
        </tab-content>
        <tab-content title="Delivery Information" :before-change="addressValidations">
          <%= render 'delivery_info_step', { form: form, registration: @registration } %>
        </tab-content>
        <tab-content title="Plan">
          <%= render 'plan_step', form: form %>
        </tab-content>
        <tab-content title="Days">
          <%= render 'day_step', { form: form, registration: @registration } %>
        </tab-content>
        <tab-content title="Payment Setup" :before-change="paymentValidations">
          <%= render 'payment_step', form: form %>
        </tab-content>
        <tab-content title="Meals">
          <div class="container-fluid">
            <%= render 'day_selection_meals', categorized_menus: @categorized_menus %>
          </div>
        </tab-content>
        <tab-content title="Review Order">
          <div class="container-fluid">
            <%= render 'review_orders', form: form %>
          </div>
        </tab-content>
        <template slot="footer" scope="props">
          <wizard-button
            @click.native="props.nextTab()"
            class="wizard-footer-right d-none">
            Next Step
          </wizard-button>
        </template>
      </form-wizard>
    </div>
  </div>
<% end %>

<%= content_for :header do %>
  <%= javascript_tag do %>
    localStorage.setItem('allowed_zip_codes', '<%= raw @allowed_zip_codes.to_json %>');
  <% end %>
<% end %>

<%= content_for :footer_js do %>
  <%= javascript_pack_tag 'vue_registration_wizard' %>
  <%= javascript_pack_tag 'user_registration' %>
<% end %>
